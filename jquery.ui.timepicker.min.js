(function(d){d.widget("ui.timepicker",{options:{step:15,startTime:new Date(0,0,0,0,0,0),endTime:new Date(0,0,0,23,45,0),separator:":",show24Hours:false,source:null,am:"am",pm:"pm"},_create:function(){var a=this.element;this.elm=a;var c=d(a),b=this._timeToDate(this.options.startTime),e=this._timeToDate(this.options.endTime);this.initial=a.val();if(this.options.source==null){a=[];for(b=new Date(b);b<=e;){a[a.length]=this._formatTime(b);b=new Date(b.setMinutes(b.getMinutes()+this.options.step))}this.options.source=
a}this._set_source(this.options.source);d("<button>&nbsp;</button>").css("height","2em").attr("tabIndex",-1).attr("title","Show All Times").insertAfter(c).button({icons:{primary:"ui-icon-triangle-1-s"},text:false}).removeClass("ui-corner-all").addClass("ui-corner-right ui-button-icon").click(function(){if(c.autocomplete("widget").is(":visible")){c.autocomplete("close");return false}c.autocomplete("search","");c.focus();return false})},_set_source:function(){this.elm.autocomplete({source:this.options.source,
delay:0,minLength:0}).addClass("ui-widget ui-widget-content ui-corner-left")},_formatTime:function(a){var c=a.getHours(),b=this.options.show24Hours?c:(c+11)%12+1;a=a.getMinutes();return this._formatNumber(b)+this.options.separator+this._formatNumber(a)+(this.options.show24Hours?"":c<12?" "+this.options.am:" "+this.options.pm)},_formatNumber:function(a){return(a<10?"0":"")+a},_timeToDate:function(a){return typeof a=="object"?this._normaliseTime(a):this._timeStringToDate(a)},_timeStringToDate:function(a){if(a){var c=
a.split(self.options.separator),b=parseFloat(c[0]);c=parseFloat(c[1]);if(!self.options.show24Hours)if(b===12&&a.substr(this.options.am)!==-1)b=0;else if(b!==12&&a.indexOf(this.options.pm)!==-1)b+=12;return this._normaliseTime(new Date(0,0,0,b,c,0))}return null},_normaliseTime:function(a){a.setFullYear(2001);a.setMonth(0);a.setDate(0);return a}})})(jQuery);
